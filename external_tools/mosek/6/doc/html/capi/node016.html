<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>14. Usage guidelines</title>
<!-- pyLaTeX: XHTML.lib.Sectioning.chapter -->
<link href="styles/style.css" rel="stylesheet"/>
<link href="styles/gstyles.css" rel="stylesheet"/>
<link href="graphics/favicon.png" rel="shortcut icon"/>
</head>
<body>
<div class="navigationarea">
<table class="navigation" width="100%" cellpadding="0" cellspacing="2">
<tbody><tr>
<td><a href="node015.html" target="_self"><img src="graphics/previous.png" class="navbutton-previous" alt="Previous : 13. Case Studies" border="0"/></a></td>
<td><a href="index.html" target="_self"><img src="graphics/up.png" class="navbutton-up" alt="Up:  The MOSEK C API manual. 
Version 6.0 (Revision 137)." border="0"/></a></td>
<td><a href="node017.html" target="_self"><img src="graphics/next.png" class="navbutton-next" alt="Next:  15. API reference" border="0"/></a></td>
<td align="center" class="navtitle">The MOSEK C API manual. 
<br/>Version 6.0 (Revision 137).</td>
<td><a href="index.html"><img src="graphics/contents.png" class="navbutton-contents" alt="" border="0"/></a></td>
<td><a href="node030.html"><img src="graphics/index.png" class="navbutton-index" alt="" border="0"/></a></td></tr>
</tbody>
</table>


<table class="trail"><tr>
<td valign="top"><b>Previous : </b><a href="node015.html" target="_self">13. Case Studies</a></td>
<td valign="top"><b>Up : </b><a href="index.html" target="_self">The MOSEK C API manual. 
<br/>Version 6.0 (Revision 137).</a></td>
<td valign="top"><b>Next : </b><a href="node017.html" target="_self">15. API reference</a></td>
<td valign="top"><a href="index.html" target="_self"><b>Contents</b></a></td>
<td valign="top"><a href="node030.html"><b>Index</b></a></td></tr></table>

<hr/>
</div>

<div>
<h1><a name="274272552">14. Usage guidelines</a></h1>

<div class="contents">
<ul class="toc-level-1">
<li><a href="node016.html#274272336" target="_self">14.1. Verifying the results</a>
<ul class="toc-level-2">
<li><a href="node016.html#274273920" target="_self">14.1.1. Verifying primal feasibility</a></li>
<li><a href="node016.html#274280104" target="_self">14.1.2. Verifying optimality</a></li>
</ul>
</li>
<li><a href="node016.html#274281392" target="_self">14.2. Turn on logging</a></li>
<li><a href="node016.html#274284912" target="_self">14.3. Turn on data checking</a></li>
<li><a href="node016.html#274281680" target="_self">14.4. Debugging an optimization task</a></li>
<li><a href="node016.html#274286784" target="_self">14.5. Error handling</a></li>
<li><a href="node016.html#274285992" target="_self">14.6. Fatal error handling</a></li>
<li><a href="node016.html#274288368" target="_self">14.7. Checking for memory leaks and overwrites</a></li>
<li><a href="node016.html#274290376" target="_self">14.8. Important API limitations</a>
<ul class="toc-level-2">
<li><a href="node016.html#274288584" target="_self">14.8.1. Thread safety</a></li>
<li><a href="node016.html#274291240" target="_self">14.8.2. Unicoded strings</a>
<ul class="toc-level-3">
<li><a href="node016.html#274290808" target="_self">14.8.2.1. Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="node016.html#274292320" target="_self">14.9. Bug reporting</a></li>
</ul>

<hr width="100%" class="tocseparator"/>
</div>

<p> <a name="chap-guidelines">&#09;</a></p>

<p>The purpose of this chapter is to present some general guidelines to follow when using MOSEK.</p>

<div>
<h1><a name="274272336">14.1. Verifying the results</a></h1>

<p> The main purpose of MOSEK is to solve optimization problems and therefore the most fundamental question to be asked is whether the solution reported by MOSEK is a solution to the desired optimization problem.</p>

<p>There can be several reasons why it might be not case. The most prominent reasons are: </p>

<ul class="itemize">
<li>A wrong problem. The problem inputted to MOSEK is simply not the right problem, i.e. some of the data may have been corrupted or the model has been incorrectly built.</li>
<li>Numerical issues. The problem is badly scaled or otherwise badly posed.</li>
<li>Other reasons. E.g. not enough memory or an explicit user request to stop. </li>
</ul>

<p> The first step in verifying that MOSEK reports the expected solution is to inspect the solution summary generated by MOSEK; see section <a title="8.7. Understanding solution quality" href="node010.html#chap:solving:sec:solqual">8.7</a> for details. The solution summary provides information about </p>

<ul class="itemize">
<li>the problem and solution statuses, </li>
<li>objective value and infeasibility measures for the primal solution, and </li>
<li>objective value and infeasibility measures for the dual solution, where applicable. </li>
</ul>

<p>By inspecting the solution summary it can be verified that MOSEK produces a feasible solution, and, in the continuous case, the optimality can be checked using the dual solution. Furthermore, the problem itself ca be inspected using the problem analyzer discussed in section <a title="10.1. The problem analyzer" href="node012.html#ch_analyzers_sec_problem">10.1</a>.</p>

<p>If the summary reports conflicting information (e.g. a solution status that does not match the actual solution), or the cause for terminating the solver before a solution was found cannot be traced back to the reasons stated above, it may be caused by a bug in the solver; in this case, please contact MOSEK support.</p>

<div>
<h2><a name="274273920">14.1.1. Verifying primal feasibility</a></h2>

<p> If it has been verified that MOSEK solves the problem correctly but the solution is still not as expected, next step is to verify that the primal solution satisfies all the constraints. Hence, using the original problem it must be determined whether the solution satisfies all the required constraints in the model. For instance assume that the problem has the constraints </p>

<table width="100%" class="displaymath" border="0">
<tbody><tr>
<td width="100%" align="center"><img src="math/math845.png" alt="\begin{displaymath}\nonumber{}\begin{array}{rcl}\nonumber{}x_{1}+2x_{2}+x_{3} & \leq{} & 1,\\\nonumber{}x_{1},x_{2},x_{3}\geq{}0 &  &\end{array}\end{displaymath}"/></td></tr>
</tbody>
</table>

<p>and MOSEK reports the optimal solution </p>

<table width="100%" class="displaymath" border="0">
<tbody><tr>
<td width="100%" align="center"><img src="math/math846.png" alt="\begin{displaymath}\nonumber{}x_{1}=x_{2}=x_{3}=1.\end{displaymath}"/></td></tr>
</tbody>
</table>

<p>Then clearly the solution violates the constraints. The most likely explanation is that the model does not match the problem entered into MOSEK, for instance </p>

<table width="100%" class="displaymath" border="0">
<tbody><tr>
<td width="100%" align="center"><img src="math/math847.png" alt="\begin{displaymath}\nonumber{}x_{1}-2x_{2}+x_{3}\leq{}1\end{displaymath}"/></td></tr>
</tbody>
</table>

<p>may have been inputted instead of </p>

<table width="100%" class="displaymath" border="0">
<tbody><tr>
<td width="100%" align="center"><img src="math/math848.png" alt="\begin{displaymath}\nonumber{}x_{1}+2x_{2}+x_{3}\leq{}1.\end{displaymath}"/></td></tr>
</tbody>
</table>

<p>A good way to debug such an issue is to dump the problem to OPF file and check whether the violated constraint has been specified correctly.</p>

</div>

<div>
<h2><a name="274280104">14.1.2. Verifying optimality</a></h2>

<p> Verifying that a feasible solution is optimal can be harder. However, for continuous problems optimality can verified using a dual solution. Normally, MOSEK will report a dual solution; if that is feasible and has the same objective value as the primal solution, then the primal solution must be optimal.</p>

<p>An alternative method is to find another primal solution that has better objective value than the one reported to MOSEK. If that is possible then either the problem is badly posed or there is bug in MOSEK.</p>

</div>

</div>

<div>
<h1><a name="274281392">14.2. Turn on logging</a></h1>

<p> While developing a new application it is recommended to turn on logging, so that error and diagnostics messages are displayed.</p>

<p>Using the <a href="node017.html#common-func*mosek*task*linkfiletotaskstream"><tt class="tt">MSK_linkfiletotaskstream</tt></a> function a file can be linked to a task stream. This means that all messages sent to a task stream are also written to a file. As an example consider the code fragment </p>

<pre class="verbatim">MSK_linkfiletotaskstream(task,MSK_STREAM_LOG ,"moseklog.txt");
</pre>

<p>which shows how to link the file <tt class="tt">moseklog.txt</tt> to the log stream.</p>

<p>It is also possible to link a custom function to a stream using the <a href="node017.html#common-func*mosek*task*linkfunctotaskstream"><tt class="tt">MSK_linkfunctotaskstream</tt></a> function.</p>

<p>More log information can be obtained by modifying one or more of the parameters: </p>

<ul class="itemize">
<li><a href="node018.html#common-const*mosek*iparam*log"><tt class="tt">MSK_IPAR_LOG</tt></a>, </li>
<li><a href="node018.html#common-const*mosek*iparam*log-intpnt"><tt class="tt">MSK_IPAR_LOG_INTPNT</tt></a>, </li>
<li><a href="node018.html#common-const*mosek*iparam*log-mio"><tt class="tt">MSK_IPAR_LOG_MIO</tt></a>, </li>
<li><a href="node018.html#common-const*mosek*iparam*log-cut-second-opt"><tt class="tt">MSK_IPAR_LOG_CUT_SECOND_OPT</tt></a>, </li>
<li><a href="node018.html#common-const*mosek*iparam*log-sim"><tt class="tt">MSK_IPAR_LOG_SIM</tt></a>, and </li>
<li><a href="node018.html#common-const*mosek*iparam*log-sim-minor"><tt class="tt">MSK_IPAR_LOG_SIM_MINOR</tt></a>. </li>
</ul>

<p>By default MOSEK will reduce the amount of log information after the first optimization on a given task. To get full log output on subsequent optimizations set: </p>

<pre class="verbatim">MSK_IPAR_LOG_CUT_SECOND_OPT 0
</pre>

</div>

<div>
<h1><a name="274284912">14.3. Turn on data checking</a></h1>

<p>In the development phase it is useful to use the parameter setting </p>

<pre class="verbatim">MSK_IPAR_DATA_CHECK MSK_ON
</pre>

<p>which forces MOSEK to check the input data. For instance, MOSEK looks for NANs in double values and outputs a warning if any are found.</p>

</div>

<div>
<h1><a name="274281680">14.4. Debugging an optimization task</a></h1>

<p> If something is wrong with a problem or a solution, one option is to output the problem to an OPF file and inspect it by hand. Use the <a href="node017.html#common-func*mosek*task*writedata"><tt class="tt">MSK_writedata</tt></a> function to write a task to a file immediately before optimizing, for example as follows:</p>

<pre class="verbatim">MSK_writedata(task,"taskdump.opf");
MSK_optimize(task);
</pre>

<p>This will write the problem in <tt class="tt">task</tt> to the file <tt class="tt">taskdump.opf</tt>. Inspecting the text file <tt class="tt">taskdump.opf</tt> may reveal what is wrong in the problem setup.</p>

</div>

<div>
<h1><a name="274286784">14.5. Error handling</a></h1>

<p>Most functions in the C API return a <em>response code</em> which indicates whether an error occurred. It is recommended to check to the response code and in case it is indicating an error then an appropriate action should be taken.</p>

</div>

<div>
<h1><a name="274285992">14.6. Fatal error handling</a></h1>

<p> <a name="idx-100359632">&#09;</a></p>

<p>If MOSEK encounter a fatal error caused by either an internal bug or a user error, an <em>exit function</em> is called. It is possible to tell MOSEK to use a custom exit function using the <a href="node017.html#common-func*mosek*env*putexitfunc"><tt class="tt">MSK_putexitfunc</tt></a> function. The user-defined exit function will then be called if a fatal error is detected.</p>

<p>The purpose of an exit function is to print out a suitable message that can help diagnose the cause of the error.</p>

</div>

<div>
<h1><a name="274288368">14.7. Checking for memory leaks and overwrites</a></h1>

<p> <a name="idx-100366816">&#09;</a> <a name="idx-100363872">&#09;</a> <a name="idx-100363656">&#09;</a> <a name="idx-100362720">&#09;</a></p>

<p>If you suspect that MOSEK or your own application incorrectly overwrites memory or leaks memory, we suggest you use external tools such as  <a href="http://www-306.ibm.com/software/awdtools/purify/">Purify</a>    or  <a href="http://www.valgrind.org/">valgrind</a>    to pinpoint the cause of the problem.</p>

<p>Alternatively, MOSEK has a memory check feature which can be enabled by letting the argument <tt class="tt">dbugfile</tt> be the name of a writable file when calling <a href="node017.html#common-func*mosek*env*makeenv"><tt class="tt">MSK_makeenv</tt></a>. If <tt class="tt">dgbfile</tt> is valid file name, then MOSEK will write memory debug information to this file. Assuming memory debugging is turned on, MOSEK will warn about MOSEK specific memory leaks when a MOSEK environment or task is deleted.</p>

<p>Moreover, the functions <a href="node017.html#common-func*mosek*env*checkmemenv"><tt class="tt">MSK_checkmemenv</tt></a> and <a href="node017.html#common-func*mosek*task*checkmemtask"><tt class="tt">MSK_checkmemtask</tt></a> can be used to check the memory allocated by a MOSEK environment or task at any time. If one these functions finds that the memory has been corrupted a fatal error is generated.</p>

</div>

<div>
<h1><a name="274290376">14.8. Important API limitations</a></h1>

<div>
<h2><a name="274288584">14.8.1. Thread safety</a></h2>

<p> <a name="idx-100392112">&#09;</a></p>

<p>The MOSEK API is thread-safe provided that a task is accessed from one thread only at any time.</p>

</div>

<div>
<h2><a name="274291240">14.8.2. Unicoded strings</a></h2>

<p>The <tt class="tt">C</tt> API supports the usage of unicoded strings. Indeed all (<tt class="tt">char *</tt>) arguments are allowed to be UTF8 encoded strings.</p>

<div>
<h3><a name="274290808">14.8.2.1. Limitations</a></h3>

<p>Please note that the MPS and LP file formats are ASCII formats. Therefore, it might be advantageous to limit all names of constraints, variables etc. to ASCII strings.</p>

</div>

</div>

</div>

<div>
<h1><a name="274292320">14.9. Bug reporting</a></h1>

<p>If you think MOSEK is solving your problem incorrectly, please contact MOSEK support at <a href="mailto:support@mosek.com">support@mosek.com</a> providing a detailed description of the problem. MOSEK support may ask for the task file which is produced as follows</p>

<pre class="verbatim">MSK_writedata(task,"taskfile.mbt");
MSK_optimize(task);
</pre>

<p>The task data will then be written to the <tt class="tt">taskfile.mbt</tt> file in binary form which is very useful when reproducing a problem.</p>

</div>

</div>

<div class="navigationarea">
<table class="navigation" width="100%" cellpadding="0" cellspacing="2">
<tbody><tr>
<td><a href="node015.html" target="_self"><img src="graphics/previous.png" class="navbutton-previous" alt="Previous : 13. Case Studies" border="0"/></a></td>
<td><a href="index.html" target="_self"><img src="graphics/up.png" class="navbutton-up" alt="Up:  The MOSEK C API manual. 
Version 6.0 (Revision 137)." border="0"/></a></td>
<td><a href="node017.html" target="_self"><img src="graphics/next.png" class="navbutton-next" alt="Next:  15. API reference" border="0"/></a></td>
<td align="center" class="navtitle">The MOSEK C API manual. 
<br/>Version 6.0 (Revision 137).</td>
<td><a href="index.html"><img src="graphics/contents.png" class="navbutton-contents" alt="" border="0"/></a></td>
<td><a href="node030.html"><img src="graphics/index.png" class="navbutton-index" alt="" border="0"/></a></td></tr>
</tbody>
</table>


<table class="trail"><tr>
<td valign="top"><b>Previous : </b><a href="node015.html" target="_self">13. Case Studies</a></td>
<td valign="top"><b>Up : </b><a href="index.html" target="_self">The MOSEK C API manual. 
<br/>Version 6.0 (Revision 137).</a></td>
<td valign="top"><b>Next : </b><a href="node017.html" target="_self">15. API reference</a></td>
<td valign="top"><a href="index.html" target="_self"><b>Contents</b></a></td>
<td valign="top"><a href="node030.html"><b>Index</b></a></td></tr></table>

<hr/>
</div>

<div class="gentime">Tue Apr 10 10:50:20 2012</div>
</body></html>